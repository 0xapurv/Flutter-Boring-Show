import 'package:flutter_test/flutter_test.dart';
import 'package:hacker_news_extended/model/json_parsing.dart';

void main() {
  test("parses topstories.json", () {
    const jsonString = "[21167871,21167683,21167601,21166235,21167368,21149882,21165525,21166852,21167595,21155392,21164014,21162466,21167957,21159199,21167989,21168331,21153224,21167665,21167211,21167497,21153129,21166317,21166923,21164707,21165375,21158793,21165736,21165993,21163760,21165139,21165461,21160714,21167621,21163445,21164551,21163077,21163589,21166064,21164686,21166098,21165137,21166210,21165111,21164851,21166519,21165161,21163620,21166215,21158772,21161233,21161201,21166919,21164211,21167269,21164838,21159502,21165460,21157404,21157066,21160238,21164005,21167689,21164275,21149744,21159872,21166808,21161432,21157895,21160450,21163010,21156637,21166897,21163532,21161402,21159004,21158417,21165379,21162526,21159842,21164614,21162737,21157120,21161168,21159755,21162227,21152081,21150606,21158402,21144228,21165313,21157398,21152024,21151226,21161700,21164768,21161043,21163359,21156277,21156467,21165788,21157709,21165229,21161896,21156705,21164175,21149820,21164139,21158346,21157350,21159485,21157608,21156527,21151646,21155189,21153037,21160944,21165214,21166743,21158051,21154719,21165154,21152014,21139348,21159947,21156664,21156482,21142541,21163923,21159155,21156325,21157115,21159160,21163274,21154048,21162776,21163657,21151433,21164903,21151032,21164827,21151928,21156522,21156162,21163835,21160004,21136671,21160432,21146745,21156680,21145755,21158261,21161792,21148247,21139672,21165216,21156408,21162111,21152542,21143526,21153737,21153933,21156476,21162640,21145150,21148092,21164264,21154893,21145014,21167323,21153063,21138841,21158704,21164194,21158592,21165581,21156134,21147058,21154565,21154301,21165725,21136663,21155348,21156498,21152978,21150402,21153555,21143937,21140052,21141574,21151117,21150930,21150678,21154606,21138101,21144975,21165400,21154360,21165025,21155040,21151234,21142981,21148955,21147360,21135992,21167362,21162734,21163655,21157621,21155401,21164955,21163927,21151045,21143405,21145676,21147825,21152084,21158491,21146991,21143848,21146918,21137553,21152955,21136534,21159479,21161619,21139508,21153175,21155497,21155571,21144098,21147554,21156828,21145605,21146604,21162920,21136364,21139289,21147865,21144604,21148370,21142977,21151314,21165293,21144627,21156473,21151955,21145341,21159409,21138290,21156700,21165119,21162080,21140144,21154479,21147916,21137653,21141821,21142827,21161783,21149311,21164233,21143894,21138736,21138418,21150939,21143497,21163193,21138192,21156540,21146356,21147392,21149982,21153232,21150906,21138530,21150900,21140801,21139309,21140679,21154222,21145249,21140924,21155039,21156324,21150433,21141260,21156402,21139360,21162348,21135974,21158646,21156776,21158487,21158474,21136325,21149417,21135945,21141513,21137436,21140913,21142041,21141241,21136258,21164843,21147202,21139118,21153958,21152838,21152131,21160611,21137450,21164253,21156387,21158096,21149041,21136348,21137280,21150820,21136259,21138106,21150973,21161963,21153341,21153800,21152049,21139591,21155346,21141914,21155356,21142992,21137729,21155849,21155353,21141761,21163187,21163873,21163085,21160311,21135882,21154675,21150500,21161604,21145500,21146276,21152421,21163648,21154145,21138449,21153928,21140793,21138578,21137084,21157797,21161931,21155723,21161806,21157528,21157449,21139993,21152282,21159231,21159198,21145481,21136278,21158554,21148876,21137886,21150260,21141188,21160519,21157794,21149415,21148756,21139990,21162515,21148330,21148962,21157762,21154907,21159296,21137003,21146924,21154562,21136771,21156363,21142584,21140703,21135641,21138417,21136965,21138932,21154981,21152319,21139453,21146291,21140335,21144665,21138176,21137960,21159716,21139230,21136946,21153961,21156360,21159538,21142298,21158876,21158869,21137037,21158585,21157867,21148413,21155402,21157337,21147183,21153478,21156342,21144635,21156771,21149464,21152861,21153550,21153332,21152102,21144097,21151497,21151072,21161460,21154125,21154015,21146354,21155830,21155670,21155626,21142071,21158259,21155320,21141510,21144937,21140508,21136127,21152419,21149126,21148506,21151759,21139465,21146380,21142452,21149455,21139941,21148833,21136514,21144790,21153920,21153755,21150693,21140750,21153558,21153533,21143959,21146635,21137563,21160769,21145952,21159957,21145082,21142358,21151100,21144836,21141149,21136089,21148810,21148437,21157172,21138430,21137838,21154532,21146258,21141284,21136554,21136053,21141690,21141647,21135719,21145558,21141129,21139879,21140607,21140444,21144957,21140200,21138936,21138158,21137843,21143964,21143595,21143147,21142641,21142397,21142203]";
    expect(parseTopStories(jsonString).first, 21167871);
  });

  test("parses item.json", () {
    const jsonString = """{"by":"dhouston","descendants":71,"id":8863,"kids":[9224,8917,8952,8884,8887,8869,8958,8940,8908,9005,8873,9671,9067,9055,8865,8881,8872,8955,10403,8903,8928,9125,8998,8901,8902,8907,8894,8870,8878,8980,8934,8943,8876],"score":104,"time":1175714200,"title":"My YC app: Dropbox - Throw away your USB drive","type":"story","url":"http://www.getdropbox.com/u/2/screencast.html"}""";
    expect(parseArticle(jsonString).by, "dhouston");
  });
}